// Local Development Schema (SQLite)
// Use this for local development

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

// =====================
// API Keys Table
// =====================
model ApiKey {
  id        String   @id @default(uuid())
  name      String
  apiKey    String   @unique @map("api_key")
  isActive  Boolean  @default(true) @map("is_active")
  createdAt DateTime @default(now()) @map("created_at")

  @@map("api_keys")
}

// =====================
// Students Table
// =====================
model Student {
  id                 String    @id @default(uuid())
  
  // Identitas utama
  registrationNumber String    @unique @map("registration_number") // No Reg
  fullName           String    @map("full_name") // Nama Lengkap
  admissionPath      String?   @map("admission_path") // Jalur
  majorChoice1       String    @map("major_choice_1") // Jurusan
  
  // Kontak
  email              String?
  phone              String?
  
  // Akademik
  graduationYear     Int?      @map("graduation_year") // Tahun Lulus
  gender             String?   // L or P
  schoolOrigin       String?   @map("school_origin") // Asal Sekolah
  schoolMajor        String?   @map("school_major") // Jurusan Sekolah
  ranking            Int?
  
  // Orang tua
  parentName         String?   @map("parent_name") // Nama Orang Tua
  parentPhone        String?   @map("parent_phone") // HP Orang Tua
  
  // Data pribadi
  religion           String?   // Agama
  colorBlind         Boolean   @default(false) @map("color_blind") // Buta Warna
  
  // Alamat
  province           String?   // Provinsi
  city               String?   // Kota/Kabupaten
  village            String?   // Kelurahan
  district           String?   // Kecamatan
  postalCode         String?   @map("postal_code") // Kode Pos
  homeAddress        String?   @map("home_address") // Alamat Rumah
  
  // Pilihan jurusan lanjutan
  majorChoice2       String?   @map("major_choice_2") // Pilihan Jurusan 2
  majorChoice3       String?   @map("major_choice_3") // Pilihan Jurusan 3
  majorChoice4       String?   @map("major_choice_4") // Pilihan Jurusan 4
  
  // Lainnya
  agent              String?
  loaPublished       Boolean   @default(false) @map("loa_published") // LOA Published
  loaDate            DateTime? @map("loa_date") // Tanggal LOA
  
  // Status Mahasiswa
  nim                String    @unique // NIM wajib diisi
  convertedAt        DateTime? @map("converted_at") // Waktu konversi ke mahasiswa
  
  createdAt          DateTime  @default(now()) @map("created_at")
  updatedAt          DateTime  @updatedAt @map("updated_at")

  @@map("students")
}

// =====================
// Study Programs Table
// =====================
model StudyProgram {
  id           String   @id @default(uuid())
  idProdi      String   @unique @map("id_prodi")
  namaProdi    String   @map("nama_prodi")
  idJenjang    String   @map("id_jenjang")
  namaJenjang  String   @map("nama_jenjang")
  idFakultas   String   @map("id_fakultas")
  namaFakultas String   @map("nama_fakultas")
  isActive     Boolean  @default(true) @map("is_active")
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@map("study_programs")
}
